<input type="hidden" id="user_id" value="<%= current_user.id %>">
<!-- 1 -->
<div class="ui right fixed vertical menu block-edit-sidebar" id="edit_menu">
  <!-- 2 -->
  <div class="item timer">
    <%# TODO: タイマー実装後に削除 %>
    <!-- 時計 -->
    <small>現在時刻</small><br>
    <div id="RealtimeClockArea2" class="timer_min"></div>
    <script>
        if ($(".brainstorming.edit").length > 0) {
            function set2fig(num) {
                // 桁数が1桁だったら先頭に0を加えて2桁に調整する
                var ret;
                if (num < 10) {
                    ret = "0" + num;
                } else {
                    ret = num;
                }
                return ret;
            }

            function showClock2() {
                var nowTime = new Date();
                var nowHour = set2fig(nowTime.getHours());
                var nowMin = set2fig(nowTime.getMinutes());
                var nowSec = set2fig(nowTime.getSeconds());
                var msg = nowHour + ":" + nowMin + ":" + nowSec;
                if ($('#RealtimeClockArea2').length === 0) {
                    clearInterval(timerId)
                } else {
                    document.getElementById("RealtimeClockArea2").innerHTML = msg;
                }
            }

            let timerId = setInterval('showClock2()', 1000);
        }
    </script>

  </div>
  <!-- 3 -->
  <div class="item explain">
    <div class="header-text">
      <i class="question circle outline icon"></i>ブレインストーミング
    </div>
    <ul class="explain-list">
      <li class="bold">アイデア出し： 無制限</li>
      <li><s>意見だし　　：</s></li>
      <li><s>グルーピング：</s></li>
      <%#
      <li class="bold">アイデア出し：30m</li>
      <li>意見だし　　：10m</li>
      <li>グルーピング：10m</li>
      %>
    </ul>
  </div>
  <!-- 4 -->
  <div class="item participant">
    <div class="header-text">
      参加者
    </div>
    <div class="member">
      <ul class="users">
        <% for user in users %>
          <li id="participant_<%= user.id %>"><i class="user circle icon"></i><%= user.user_name.blank? ? "Anonymous" : user.user_name.to_s %></li>
        <% end %>
      </ul>
    </div>
  </div>

  <div class="item chat">
    <div class="header-text">
      chat
    </div>
    <div class="ui input mini chat-input">
      <%= text_field_tag 'idea_chat', nil, placeholder: '話しかける...', data: {behavior: 'idea_speaker'} %>
    </div>
    <div class="chat-area">
      <div class="inline field">
        <div class="chat_contents">
          <% preview_user_id = nil %>
          <% for idea_log in @idea_logs.reverse %>
            <% if idea_log.query['mode'] == 'chat' %>
              <% if preview_user_id != idea_log.query['user_id'] %>
                </div>
                <div class="chat_content" name="chatuser_<%= idea_log.query['user_id'] %>">
                  <h6 class="chat_username"><%= idea_log.query['chat']['user_name'] %></h6>
              <% end %>
              <% if current_user.id == idea_log.query['user_id'] %>
                <div class="ui right pointing label chat_message"><%= idea_log.query['chat']['content'] %></div>
              <% else %>
                <div class="ui left pointing label chat_message"><%= idea_log.query['chat']['content'] %></div>
              <% end %>
              <% preview_user_id = idea_log.query['user_id'] %>
            <% end %>
          <% end %>
          </div>
          </div>
    </div>
  </div>
</div>
</div>
